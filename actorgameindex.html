<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="actorgamestyles.css">
    <title>Actor Game</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>
<body>

    <div class="box">
        <div class="containerOne" id="one">

            <h1 id="first_name" class="actor"></h1>
            
    
        </div>
    
        <div class="containerTwo" id="two">
    
            <input type="text" id="queryOne" class="autocomplete" placeholder="Enter actor's name"/>
            <button id="searchBtn" class="btn">Search</button><br><br>
    
    
        </div>
    
        <div class="containerThree" id="two">
    
    
            <h1 id="second_name" class="actor1"></h1>
    
        </div>
    </div>
    
    <script>

        let name1 = "wesley hatfield"

        name1 = name1[0].toUpperCase() + name1.substr(1);

        var nameArray = name1.split(/(\s+)/);

        for(var i = 1; i < nameArray.length; i++){
            nameArray[i] = nameArray[i][0].toUpperCase() + nameArray[i].substr(1);
        }

        name2 = nameArray.join("");

        console.log(name2)

        

const celebs = [
"Leonardo DiCaprio",
"Meryl Streep",
"Brad Pitt",
"Scarlett Johansson",
"Denzel Washington",
"Cate Blanchett",
"Robert Downey Jr.",
"Nicole Kidman",
"Tom Hanks",
"Charlize Theron",
"Johnny Depp",
"Angelina Jolie",
"Joaquin Phoenix",
"Julia Roberts",
"George Clooney",
"Natalie Portman",
"Will Smith",
"Jennifer Lawrence",
"Morgan Freeman",
"Kate Winslet",
"Keanu Reeves",
"Sandra Bullock",
"Matt Damon",
"Emma Stone",
"Chris Hemsworth",
"Viola Davis",
"Ryan Gosling",
"Anne Hathaway",
"Hugh Jackman",
"Jennifer Aniston",
"Dwayne Johnson",
"Helen Mirren",
"Chris Evans",
"Jessica Chastain",
"Jake Gyllenhaal",
"Amy Adams",
"Mahershala Ali",
"Gal Gadot",
"Bradley Cooper",
"Emma Watson",
"Ryan Reynolds",
"Saoirse Ronan",
"Jamie Foxx",
"Daniel Day-Lewis",
"Halle Berry",
"Ben Affleck",
"Jodie Foster",
"Eddie Redmayne",
"Matthew McConaughey",
"Liam Neeson",
"Natalie Dormer",
"Mark Wahlberg",
"Rachel McAdams",
"Idris Elba",
"Emily Watson",
"Jim Carrey",
"Tilda Swinton",
"James McAvoy",
"Julianne Moore",
"Forest Whitaker",
"Marion Cotillard",
"Seth Rogen",
"John Malkovich",
"Shirley Temple",
"Casey Affleck",
"Ellen DeGeneres",
"Ewan McGregor",
"Greta Gerwig",
"Ralph Fiennes",
"Taron Egerton",
"Diane Lane",
"Sean Penn",
"Meg Ryan",
"Viggo Mortensen",
"Rosamund Pike",
"James Franco",
"Catherine Zeta-Jones",
"Michael Fassbender",
"Uma Thurman",
"Bryan Cranston",
"Michael Caine",
"J.K. Simmons",
"Kristen Stewart",
"Michael B. Jordan",
"Mila Kunis",
"Tom Hardy",
"Emily Blunt",
"Anthony Hopkins",
"Eddie Murphy",
"Sally Field",
"Russell Crowe",
"Joseph Gordon-Levitt",
"Ellen Burstyn",
"Josh Gad",
"Maggie Smith",
"John C. Reilly",
"Annette Bening",
"Chris Pratt",
"Rachel Weisz",
"Jon Hamm",
"Helen Hunt",
"Donald Glover",
"Jude Law",
"Ellen Page",
"Jeff Goldblum",
"Robin Williams",
"Demi Moore",
"Matthew Perry",
"Kathy Bates",
"Patrick Swayze",
"Renee Zellweger",
"Clint Eastwood",
"Salma Hayek",
"Jamie Dornan",
"Joseph Fiennes",
"Dakota Johnson",
"Bill Nighy",
"Alicia Silverstone",
"Josh Brolin",
"Carey Mulligan",
"Michael Keaton",
"Jodie Comer",
"Rosario Dawson",
"Timothy Olyphant",
"Anna Kendrick",
"Robert De Niro",
"Tessa Thompson",
"Kevin Costner",
"Zoe Saldana",
"Hugh Grant",
"Mary J. Blige",
"Jeremy Renner",
"Gina Rodriguez",
"David Tennant",
"Aishwarya Rai Bachchan",
"Mark Ruffalo",
"Kerry Washington",
"Alicia Vikander",
"Jonathan Pryce",
"Sarah Paulson",
"Richard Gere",
"Evan Rachel Wood",
"Chris Cooper",
"Olivia Colman",
"Iain Glen",
"Hailee Steinfeld",
"James Marsden",
"Lily James",
"Ryan Phillippe",
"Patricia Clarkson",
"Jeremy Irons",
"Constance Wu",
"Brendan Fraser",
"Elle Fanning",
"Rose Leslie",
"Michael Shannon",
"Tom Holland",
"Robert Pattinson",
"Reese Witherspoon",
"Zac Efron",
"Amanda Seyfried",
"Zendaya",
"Oscar Isaac",
"Lupita Nyong'o",
"Jesse Eisenberg",
"Gemma Chan",
"Charlie Hunnam",
"Emma Roberts",
"Zoe Kravitz",
"Kit Harington",
"Lily Collins",
"Chadwick Boseman",
"Naomi Watts",
"Dev Patel",
"John Boyega",
"Aubrey Plaza",
"Daisy Ridley",
"Brie Larson",
"Henry Cavill",
"John Krasinski",
"Emilia Clarke",
"Javier Bardem",
"Margot Robbie",
"Andrew Garfield",
"Emily Ratajkowski",
"Armie Hammer",
"Dakota Fanning",
"Lena Headey",
"Shia LaBeouf",
"Paul Rudd",
"Michael Cera",
"Mindy Kaling",
"Cillian Murphy",
"Zazie Beetz",
"Tom Cruise",
"Bradley Whitford",
"Julia Louis-Dreyfus",
"Daniel Craig",
"Jason Momoa",
"Jessica Biel",
"Owen Wilson",
"Chris Pine",
"Penelope Cruz",
"John Legend",
"Michelle Williams",
"John Travolta",
"Jennifer Garner",
"Colin Farrell",
"Samuel L. Jackson",
"Judy Greer",
"Elizabeth Olsen",
"Benedict Cumberbatch",
"Olivia Wilde",
"Laura Dern",
"Eva Green",
"Rooney Mara",
"Liam Hemsworth",
"Naomi Scott",
"Will Ferrell",
"Chris Rock",
"Bill Hader",
"Kate Beckinsale"];


        let actorOne;
        let actorTwo;

        var colArray = ["#8D86C9", "#B3001B", "#9CC4B2", "#E0DDCF"];

        var result = window.confirm("If you want us to pick the actors for you select Ok.");

        if(result){
            actorOne = celebs[Math.floor(Math.random()*celebs.length)];
            actorTwo = celebs[Math.floor(Math.random()*celebs.length)];
        } else {
            actorOne = prompt("Please enter the first actor", "");
            actorTwo = prompt("Please enter the first actor", "");
        }

    
        $('#first_name').html(actorOne)
        $('#second_name').html(actorTwo)


        // Set up autocomplete for input fields
        $(".autocomplete").autocomplete({
            source: celebs,
            minLength: 2, // Minimum characters before suggestions are shown
            delay: 300,   // Delay in milliseconds before making the request
        });

        function checkNameOne(one, two) {

                
            let queryOne=$('#queryOne').val();

            let name1 = queryOne;

            name1 = name1[0].toUpperCase() + name1.substr(1);

            var nameArray = name1.split(/(\s+)/);

            for(var i = 1; i < nameArray.length; i++){
                nameArray[i] = nameArray[i][0].toUpperCase() + nameArray[i].substr(1);
            }

            name2 = nameArray.join("");


            let nameOne = actorOne;
            let nameTwo = name2;
            let idOne;
            let idTwo;
            let oneMovie;
            let commonMovie;
            var arrayOne = [];
            let twoMovie;
            var arrayTwo = [];

            const options = {
                method: 'GET',
                headers: {
                    accept: 'application/json',
                    Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJhNjBiNWNhZmM3YjZiMmZiYzA2MjZkZjA1NWFlMmQ2MiIsInN1YiI6IjY1YzM4Y2IyM2ZlNzk3MDE4M2ZlZjkyNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.VBXEhhJA_kJuU1uRe2OOZ7NzIyJwWzOwgz2ZcerG9zM'
                }
            };

            fetch('https://api.themoviedb.org/3/search/person?query='+nameOne+'&include_adult=false&language=en-US&page=1', options)
                .then(response => response.json())
                .then(response => {
                    idOne = response.results[0].id;

                    fetch('https://api.themoviedb.org/3/person/'+idOne+'/movie_credits?language=en-US', options)
                    .then(response => response.json())
                    .then(response => {
                        oneMovie = response;

                        for(var i=0; i < oneMovie.cast.length; i++){

                            arrayOne.push(oneMovie.cast[i].id)

                                            
                        }

                        fetch('https://api.themoviedb.org/3/search/person?query='+nameTwo+'&include_adult=false&language=en-US&page=1', options)
                            .then(response => response.json())
                            .then(response => {
                                idTwo = response.results[0].id;

                                fetch('https://api.themoviedb.org/3/person/'+idTwo+'/movie_credits?language=en-US', options)
                                .then(response => response.json())
                                .then(response => {
                                    twoMovie = response;

                                    for(var i=0; i < twoMovie.cast.length; i++){

                                        arrayTwo.push(twoMovie.cast[i].id)

                                                        
                                    }

                                    let commonMovieIds = arrayOne.filter(id => arrayTwo.includes(id));

                                    
                                    if (commonMovieIds.length > 0) {
                                        fetch('https://api.themoviedb.org/3/movie/'+commonMovieIds[0]+'?language=en-US', options)
                                        .then(response => response.json())
                                        .then(response => {
                                            commonMovie = response.title;

                                            const post = document.createElement('img')
                                            post.setAttribute('id','poster')
                                            post.setAttribute('class','poster')
                                            post.setAttribute('src',"https://image.tmdb.org/t/p/w500"+response.poster_path)

                                            const p = document.createElement("p");
                                            const textNode1 = document.createTextNode(commonMovie);
                                            p.appendChild(textNode1);

                                            const h1 = document.createElement("H1");
                                            const textNode = document.createTextNode(name2);
                                            h1.appendChild(textNode);

                                            let sect = document.getElementById("one");
                                            sect.appendChild(post);
                                            sect.appendChild(p);
                                            sect.appendChild(h1);

                                            actorOne = name2;
 

                                            checkNameTwo(two, actorTwo);

                                            $('#queryOne').val("")
                                            $('#queryTwo').val("")

                                            console.log(commonMovie);
                                        })
                                        .catch(err => console.error(err));
                                    } else {

                                        $('#queryOne').val("")
                                            $('#queryTwo').val("")
                                    console.log("No common movies found.");
                                    }
                                    
                                })
                                .catch(err => console.error(err));
                        })
                        .catch(err => {
                            console.error(err)
                            $('#queryTwo').val("")
                        });

                    })
                    .catch(err => console.error(err));
                })
                .catch(err => {
                    console.error(err)
                    $('#queryOne').val("")
                });

            $('#queryOne').val("");
            $('#queryTwo').val("");

        }

        function checkNameTwo(one, two) {
                
    
                let nameOne = actorOne;
                let nameTwo = actorTwo;
                let idOne;
                let idTwo;
                let oneMovie;
                let commonMovie;
                var arrayOne = [];
                let twoMovie;
                var arrayTwo = [];
    
                const options = {
                    method: 'GET',
                    headers: {
                        accept: 'application/json',
                        Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJhNjBiNWNhZmM3YjZiMmZiYzA2MjZkZjA1NWFlMmQ2MiIsInN1YiI6IjY1YzM4Y2IyM2ZlNzk3MDE4M2ZlZjkyNyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.VBXEhhJA_kJuU1uRe2OOZ7NzIyJwWzOwgz2ZcerG9zM'
                    }
                };
    
                fetch('https://api.themoviedb.org/3/search/person?query='+nameOne+'&include_adult=false&language=en-US&page=1', options)
                    .then(response => response.json())
                    .then(response => {
                        idOne = response.results[0].id;
    
                        fetch('https://api.themoviedb.org/3/person/'+idOne+'/movie_credits?language=en-US', options)
                        .then(response => response.json())
                        .then(response => {
                            oneMovie = response;
    
                            for(var i=0; i < oneMovie.cast.length; i++){
    
                                arrayOne.push(oneMovie.cast[i].id)
    
                                                
                            }
    
                            fetch('https://api.themoviedb.org/3/search/person?query='+nameTwo+'&include_adult=false&language=en-US&page=1', options)
                                .then(response => response.json())
                                .then(response => {
                                    idTwo = response.results[0].id;
    
                                    fetch('https://api.themoviedb.org/3/person/'+idTwo+'/movie_credits?language=en-US', options)
                                    .then(response => response.json())
                                    .then(response => {
                                        twoMovie = response;
    
                                        for(var i=0; i < twoMovie.cast.length; i++){
    
                                            arrayTwo.push(twoMovie.cast[i].id)
    
                                                            
                                        }
    
                                        let commonMovieIds = arrayOne.filter(id => arrayTwo.includes(id));
    
                                        
                                        if (commonMovieIds.length > 0) {
                                            fetch('https://api.themoviedb.org/3/movie/'+commonMovieIds[0]+'?language=en-US', options)
                                            .then(response => response.json())
                                            .then(response => {
                                                commonMovie = response.title;

    
                                                const post = document.createElement('img')
                                            post.setAttribute('id','poster')
                                            post.setAttribute('class','poster')
                                            post.setAttribute('src',"https://image.tmdb.org/t/p/w500"+response.poster_path)

                                            const p = document.createElement("p");
                                            const textNode1 = document.createTextNode(commonMovie);
                                            p.appendChild(textNode1);

                                            const h1 = document.createElement("H1");
                                            const textNode = document.createTextNode(actorTwo);
                                            h1.appendChild(textNode);

                                            let sect = document.getElementById("one");
                                            sect.appendChild(post);
                                            sect.appendChild(p);
                                            sect.appendChild(h1);
    
                                                $('#queryOne').val("")
                                                $('#queryTwo').val("")
    
                                                console.log(commonMovie);
                                            })
                                            .catch(err => console.error(err));
                                        } else {
    
                                            $('#queryOne').val("")
                                                $('#queryTwo').val("")
                                        console.log("No common movies found.");
                                        
                                        }
                                        
                                    })
                                    .catch(err => console.error(err));
                            })
                            .catch(err => {
                                console.error(err)
                                $('#queryTwo').val("")
                            });
    
                        })
                        .catch(err => console.error(err));
                    })
                    .catch(err => {
                        console.error(err)
                        $('#queryOne').val("")
                    });
    
                $('#queryOne').val("");
                $('#queryTwo').val("");
    
            }

        $('#searchBtn').click(function(){


            let queryOne=$('#queryOne').val();

            checkNameOne(actorOne, queryOne); 

        });

    </script>

</body>
</html>
